class GHAGMag : CustomInventory replaces Clip
{
	default {
		Inventory.PickupMessage "Picked up a magazine.";
		Inventory.Amount 10;
		inventory.pickupsound "misc/w_pkup";
	}
	
	override bool TryPickup(Actor toucher)
	{
		let gardie = Gardevoir(Players[consoleplayer].mo);
		
		for (let probe = gardie.Inv; probe != NULL; probe = probe.Inv)
		{
			let item = Clip(probe);
			if (item) {
				if (gardie.countinv('clip') >= item.maxamount) return false;
				else {
					if (gardie.countinv("GHAGPistol") == 0)
					{
						gardie.giveInventory("GHAGPistol", 1);
						gardie.giveInventory("GHAGPistolOverlay", 1);
						if (!gardie.chargingBlackHole) {
							gardie.A_SelectWeapon("GHAGPistol");
						}
					}
					gardie.giveInventory("Clip", self.amount);
					GoAwayAndDie();
				}
			}
		}
		return true;
	}
	
	States
	{
		Spawn :
			CLIP A -1;
			Stop;
	}
}

class GHAGBulletBox : GHAGMag replaces ClipBox
{
	default {
		Inventory.PickupMessage "$GOTCLIPBOX";
		Inventory.Amount 50;
		inventory.pickupsound "misc/w_pkup";
	}
	States
	{
		Spawn :
			AMMO A -1;
			Stop;
	}
}